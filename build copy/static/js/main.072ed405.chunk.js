(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(14),a=t.n(c),o=t(3),u=t(2),r=t(0),i=function(e){var n=e.person,t=e.deletePerson;return Object(r.jsxs)("div",{children:[n.name," ",n.number,Object(r.jsx)("button",{onClick:t,children:"Delete"})]})},l=function(e){return Object(r.jsxs)("div",{children:[Object(r.jsxs)("div",{className:"kaavake",children:["Nimi: ",Object(r.jsx)("input",{value:e.newName,onChange:e.handleNameChange}),"Numero: ",Object(r.jsx)("input",{value:e.newNumber,onChange:e.handleNumberChange})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",children:"Lis\xe4\xe4"})})]})},s=function(e){var n=e.searchValue,t=e.setSearchValue;return Object(r.jsxs)("div",{className:"kaavake",children:["Filtteri: ",Object(r.jsx)("input",{value:n,onChange:function(e){t(e.target.value)}})]})},d=t(4),h=t.n(d),j="/api/persons",f=function(){return h.a.get(j).then((function(e){return e.data}))},b=function(e){return h.a.delete(j+"/".concat(e)).then((function(e){return e.data}))},m=function(e){return h.a.post(j,e).then((function(e){return e.data}))},O=function(e,n){return h.a.put("".concat(j,"/").concat(e),n).then((function(e){return e.data}))},v=function(e){var n=e.message;return null===n?null:Object(r.jsx)("div",{className:"notifikaatio",children:n})},p=function(){var e=Object(u.useState)([]),n=Object(o.a)(e,2),t=n[0],c=n[1],a=Object(u.useState)(""),d=Object(o.a)(a,2),h=d[0],j=d[1],p=Object(u.useState)(""),x=Object(o.a)(p,2),g=x[0],w=x[1],N=Object(u.useState)(""),k=Object(o.a)(N,2),C=k[0],S=k[1],y=Object(u.useState)(null),T=Object(o.a)(y,2),D=T[0],L=T[1];Object(u.useEffect)((function(){f().then((function(e){c(e)})).catch((function(e){console.log("fail")}))}),[]);return Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Puhelinluettelo"}),Object(r.jsx)(v,{message:D}),Object(r.jsx)(s,{searchValue:C,setSearchValue:S}),Object(r.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n=!0,a=0;if(t.forEach((function(e){e.name===h&&(n=!1,a=e.id)})),n)m({name:h,number:g}).then((function(e){c(t.concat(e))})),L("Added ".concat(h)),setTimeout((function(){L(null)}),2e3),j(""),w("");else if(alert({newName:h}+" is already in phonebook"),window.confirm("".concat(h," is already added to phonebook, \n      replace the old number with a new one?"))){var o={name:h,number:g};O(a,o).then((function(e){c(t.map((function(n){return n.id!==a?n:e})))})).catch((function(e){L("The person ".concat(o.name," is not in phonebook"))})),L("Changed ".concat(h)),setTimeout((function(){L(null)}),2e3),j(""),w("")}console.log(t)},children:[Object(r.jsx)("h2",{children:"Lis\xe4\xe4 uusi"}),Object(r.jsx)(l,{newName:h,newNumber:g,handleNameChange:function(e){console.log(e.target.value),j(e.target.value)},handleNumberChange:function(e){w(e.target.value),console.log(e.target.value)}})]}),Object(r.jsx)("h2",{children:"Numerot"}),Object(r.jsx)("div",{children:t.filter((function(e){return""===C||e.name.toLowerCase().includes(C.toLowerCase())?e:void 0})).map((function(e){return Object(r.jsx)(i,{person:e,deletePerson:function(){return function(e){var n=t.find((function(n){return n.id===e}));window.confirm("Do you really want to delete?")&&(L("Deleted ".concat(n.name)),setTimeout((function(){L(null)}),2e3),b(e).then(f().then((function(e){c(e)}))).catch((function(a){L("The person ".concat(n.name," was already deleted from server")),c(t.filter((function(n){return n.id!==e})))})))}(e.id)}},e.name)}))})]})};t(38);a.a.render(Object(r.jsx)(p,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.072ed405.chunk.js.map